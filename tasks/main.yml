---
# tasks file for psm

# Validate Parameters
- name: validate input parameters
  include_tasks: psm_validateparameters.yml

- name: extract psm package
  include_tasks: psm_extract.yml
  when: 
    - psm_extract 
  
- name: running psm prerequisities
  include_tasks: psm_prerequisites.yml
  when: 
    -psm_prerequisites

- name: running psm uninstall
  include_tasks: psm_uninstall.yml
  when: 
    - psm_uninstall

- name: running psm install
  include_tasks: psm_install.yml
  when: 
    - psm_install

- name: running psm postinstall
  include_tasks: psm_postinstall.yml
  when: 
    - psm_exists
    - psm_postinstall
    
- name: running psm hardening
  include_tasks: psm_hardening.yml
  when: 
    - psm_exists
    - psm_hardening 
    
- name: running psm registration
  include_tasks: psm_registration.yml
  when: 
    - psm_registration
    - psm_exists
    - not psm_registered

- name: running psm upgrade
  include_tasks: psm_upgrade.yml
  when: 
    - psm_upgrade
  
- name: running psm clean
  include_tasks: psm_clean.yml
  when: 
    - psm_clean
